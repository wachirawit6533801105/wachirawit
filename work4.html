<!-- <!DOCTYPE html>
<html lang="th">

<head>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
  <div id="myapp" class="container p-4"></div>
  <script type="text/babel">
    class App extends React.Component {
      constructor() {
        super();
        this.state = {
          scene: 0,
          cards: [],
          cardsOpened: [],
          cardsCount: 0
        };
      }

      start() {
        this.setState({ scene: 1, cards: this.shuffle(), cardsCount: 36 });
      }

      shuffle() {
        var cards = [];
        for (var i = 1; i <= 18; i++) {
          cards.push(<Card key={i} t={i} app={this} />);
          cards.push(<Card key={i + 18} t={i} app={this} />);
        }
        for (var j = 1; j < 100; j++) {
          var a = Math.round(Math.random() * 35);
          var b = Math.round(Math.random() * 35);
          var temp = cards[a];
          cards[a] = cards[b];
          cards[b] = temp;
        }
        return cards;
      }

      checkCard() {
        var a = this.state.cardsOpened[0];
        var b = this.state.cardsOpened[1];
        this.state.cardsOpened = [];
        if (a.props.t === b.props.t) {
          a.setState({ s: 2 });
          b.setState({ s: 2 });
          this.setState({ cardsCount: this.state.cardsCount - 2 });
        } else {
          a.setState({ s: 0 });
          b.setState({ s: 0 });
        }
        if (this.state.cardsCount === 0) {
          this.setState({ scene: 2 });
        }
      }

      render() {
        var sc = <MenuScene app={this} />;
        if (this.state.scene === 1) sc = <GameScene app={this} />;
        if (this.state.scene === 2) sc = <WinScene app={this} />;
        return (
          <div className="card">
            <div className="card-header">
              <div><b>Work4 :</b> เกมจับคู่ภาพ ด้วย ReactJS</div>
            </div>
            <div className="card-body">{sc}</div>
            <div className="card-footer">
              <div>By xxxxxxxxxx-x  xxxxxxxxxxxxx xxxxxxxxxxxxxx</div>
              <div>College of Computing, Khon Kaen University</div>
            </div>
          </div>
        );
      }
    }

    class MenuScene extends React.Component {
      render() {
        return (
          <div>
            <button className="btn btn-primary mx-2" onClick={() => this.props.app.start()}>
              เริ่มเล่น
            </button>
          </div>
        );
      }
    }

    class GameScene extends React.Component {
      render() {
        return (
          <div>
            จำนวนภาพที่เหลือ {this.props.app.state.cardsCount} ใบ
            <div className="row p-2">{this.props.app.state.cards}</div>
            <button className="btn btn-danger mx-2" onClick={() => this.props.app.setState({ scene: 0 })}>
              เลิกเล่น
            </button>
          </div>
        );
      }
    }

    class WinScene extends React.Component {
      render() {
        return (
          <div>
            ยินดีด้วยคุณชนะแล้ว
            <button className="btn btn-danger mx-2" onClick={() => this.props.app.setState({ scene: 0 })}>
              ตกลง
            </button>
          </div>
        );
      }
    }

    // class Card extends React.Component {
    //   state = { s: 0 };

    //   imgClick = () => {
    //     var app = this.props.app;
    //     if (app.cardsOpened.length < 2 && this.state.s === 0) {
    //       app.cardsOpened.push(this);
    //       this.setState({ s: 1 });
    //       if (app.cardsOpened.length === 2) {
    //         setTimeout(() => app.checkCard(), 2000);
    //       }
    //     }
    //   };

    //   render() {
    //     var img = <img src="work1/0.png" width="100%" onClick={() => this.imgClick()} />;
    //     if (this.state.s === 1) {
    //       img = <img src={'work1/' + this.props.t + '.png'} width="100%" />;
    //     }
    //     if (this.state.s === 2) {
    //       img = <div />;
    //     }
    //     return (
    //       <div className="col-2">
    //         {img}
    //       </div>
    //     );
    //   }
    // }

    class Card extends React.Component {
      state = { s: 0 };

      imgClick = () => {
        var app = this.props.app;
        if (app.state.cardsOpened.length < 2 && this.state.s === 0) {
          app.state.cardsOpened.push(this);
          this.setState({ s: 1 });
          if (app.state.cardsOpened.length === 2) {
            setTimeout(() => app.checkCard(), 2000);
          }
        }
      };


      render() {
        var img = <img src="./work1/0.png" width="100%" onClick={() => this.imgClick()} />;
        if (this.state.s === 1) {
          img = <img src={'./work1' + this.props.t + '.png'} width="100%" />;
        }
        if (this.state.s === 2) {
          img = <div />;
        }
        return (
          <div className="col-2">
            {img}
          </div>
        );
      }
    }

    const container = document.getElementById('myapp');
    const root = ReactDOM.createRoot(container);
    root.render(<App />)
  </script>
</body>

</html> -->


<!DOCTYPE html>
<html lang="th">

<head>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
  <div id="myapp" class="container p-4"></div>
  <script type="text/babel">
    class App extends React.Component {
      constructor() {
        super();
        this.state = {
          scene: 0,
          cards: [],
          cardsOpened: [],
          cardsCount: 0
        };
      }

      start() {
        this.setState({ scene: 1, cards: this.shuffle(), cardsCount: 36 });
      }

      shuffle() {
        var cards = [];
        for (var i = 1; i <= 18; i++) {
          cards.push(<Card key={i} t={i} app={this} />);
          cards.push(<Card key={i + 18} t={i} app={this} />);
        }
        for (var j = 1; j < 100; j++) {
          var a = Math.round(Math.random() * 35);
          var b = Math.round(Math.random() * 35);
          var temp = cards[a];
          cards[a] = cards[b];
          cards[b] = temp;
        }
        return cards;
      }

      checkCard() {
        var a = this.state.cardsOpened[0];
        var b = this.state.cardsOpened[1];
        this.state.cardsOpened = [];
        if (a.props.t === b.props.t) {
          a.setState({ s: 2 });
          b.setState({ s: 2 });
          this.setState({ cardsCount: this.state.cardsCount - 2 });
        } else {
          a.setState({ s: 0 });
          b.setState({ s: 0 });
        }
        if (this.state.cardsCount === 0) {
          this.setState({ scene: 2 });
        }
      }

      render() {
        var sc = <MenuScene app={this} />;
        if (this.state.scene === 1) sc = <GameScene app={this} />;
        if (this.state.scene === 2) sc = <WinScene app={this} />;
        return (
          <div className="card">
            <div className="card-header">
              <div><b>Work4 :</b> เกมจับคู่ภาพ ด้วย ReactJS</div>
            </div>
            <div className="card-body">{sc}</div>
            <div className="card-footer">
              <div>By xxxxxxxxxx-x  xxxxxxxxxxxxx xxxxxxxxxxxxxx</div>
              <div>College of Computing, Khon Kaen University</div>
            </div>
          </div>
        );
      }
    }

    class MenuScene extends React.Component {
      render() {
        return (
          <div>
            <button className="btn btn-primary mx-2" onClick={() => this.props.app.start()}>
              เริ่มเล่น
            </button>
          </div>
        );
      }
    }

    class GameScene extends React.Component {
      render() {
        return (
          <div>
            จำนวนภาพที่เหลือ {this.props.app.state.cardsCount} ใบ
            <div className="row p-2">{this.props.app.state.cards}</div>
            <button className="btn btn-danger mx-2" onClick={() => this.props.app.setState({ scene: 0 })}>
              เลิกเล่น
            </button>
          </div>
        );
      }
    }

    class WinScene extends React.Component {
      render() {
        return (
          <div>
            ยินดีด้วยคุณชนะแล้ว
            <button className="btn btn-danger mx-2" onClick={() => this.props.app.setState({ scene: 0 })}>
              ตกลง
            </button>
          </div>
        );
      }
    }

    class Card extends React.Component {
      state = { s: 0 };

      imgClick = () => {
        var app = this.props.app;
        if (app.state.cardsOpened.length < 2 && this.state.s === 0) {
          app.state.cardsOpened.push(this);
          this.setState({ s: 1 });
          if (app.state.cardsOpened.length === 2) {
            setTimeout(() => app.checkCard(), 2000);
          }
        }
      };

      render() {
        var img = <img src="./work1/0.png" width="100%" onClick={() => this.imgClick()} />;
        if (this.state.s === 1) {
          img = <img src={'./work1/' + this.props.t + '.png'} width="100%" />;
        }
        if (this.state.s === 2) {
          img = <div />;
        }
        return (
          <div className="col-2">
            {img}
          </div>
        );
      }
    }

    const container = document.getElementById('myapp');
    const root = ReactDOM.createRoot(container);
    root.render(<App />)
  </script>
</body>

</html>
